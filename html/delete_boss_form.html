<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../css/styles.css" />
    <script src="../script/script.js"></script>

    <title>Delete Boss Form</title>
</head>

<body>


    <div class="container">

        <!-- Header -->
        <header class="header">

        </header>
        <!-- End Header -->

        <!-- Sidebar -->
        <aside id="sidebar">


            <ul class="sidebar-list">
                <li>
                    <a href="./add_new_boss_form.html">
                        <span>Add Boss</span>
                    </a>
                </li>

                <li>
                    <a href="./modifiy_boss_form.html">
                        <span>Modify Boss</span>
                    </a>
                </li>
                <li>
                    <a href="./delete_boss_form.html">
                        <span>Delete Boss</span>
                    </a>
                </li>


        </aside>
        <!-- End Sidebar -->


        <div class="main-contact">

            <form id="deleteBossForm" action="../php/BDAccessDelete.php" method="get">
                <label for="game">Select a game:</label>
                <select id="game" name="game">
                    <option value="">Select a game</option>
                </select>
                <br>
                <label for="boss">Select a boss:</label>
                <select id="boss" name="bossID">
                    <option value="">Select a boss</option>
                </select>
                <br>



                <input type="submit" value="Delete Boss">
            </form>
        </div>
        <script>
            // Fetch XML data and populate the dropdowns
            fetch('../xml/saga.xml')
                .then(response => response.text())
                .then(xmlString => {
                    const parser = new DOMParser();
                    const xmlDoc = parser.parseFromString(xmlString, 'text/xml');

                    // Populate game dropdown
                    const gameDropdown = document.getElementById('game');
                    const games = xmlDoc.querySelectorAll('juego');
                    games.forEach(game => {
                        const title = game.querySelector('titulo').textContent;
                        const id = game.getAttribute('id');
                        const option = document.createElement('option');
                        option.value = id;
                        option.textContent = title;
                        gameDropdown.appendChild(option);
                    });

                    // Event listener for game selection
                    gameDropdown.addEventListener('change', () => {
                        const selectedGameId = gameDropdown.value;
                        const bossDropdown = document.getElementById('boss');
                        bossDropdown.innerHTML = '<option value="">Select a boss</option>';

                        // Populate boss dropdown based on selected game
                        const bosses = xmlDoc.querySelectorAll(`boss[juego="${selectedGameId}"]`);
                        bosses.forEach(boss => {
                            const name = boss.querySelector('nombre').textContent;
                            const bossId = boss.getAttribute('id');
                            const option = document.createElement('option');
                            option.value = bossId;
                            option.textContent = name;
                            bossDropdown.appendChild(option);
                        });
                    });
                })
                .catch(error => console.error('Error fetching XML:', error));
        </script>

</body>

</html>